var e,t;(e=self.document)&&!e.getElementById("livereloadscript")&&((t=e.createElement("script")).async=1,t.src="//"+(self.location.host||"localhost").split(":")[0]+":35729/livereload.js?snipver=1",t.id="livereloadscript",e.getElementsByTagName("head")[0].appendChild(t));class s{parentElement;rootElement;constructor(e){this.parentElement=e}init(){this.render()}markup(){}getSlot(e){return this.rootElement.querySelector(`[data-td="${e}"]`)}addSlot(e){return`<slot data-td="${e}"></slot>`}render(){this.#e(),this.afterRender()}markElement(e){return`data-td="${e}"`}getElement(e){return this.rootElement.querySelector(`[data-td="${e}"]`)}afterRender(){}#e(){const e=!this.rootElement,t=this.#t();e?this.parentElement.appendChild(t):this.rootElement.replaceWith(t),this.rootElement=t}#t(){const e=document.createElement("div");return e.innerHTML=this.markup(),e.firstElementChild}}class n extends s{#s=[];#n;#r="text";#a;#i;#o=crypto.randomUUID();#l="";constructor(e,{labelText:t,type:s="text",name:n,placeholder:r=""}){super(e),this.#n=t,this.#r=s,this.#a=n,this.#i=r,this.init()}set errorMessages(e){e&&(this.#s.push(e),this.render())}deleteErrorsMessages(){this.#s=[],this.render()}set value(e){this.#l=e,this.render()}set type(e){this.#r=e,this.render()}get name(){return this.#a}set placeholder(e){this.#i=e,this.render()}markup(){const e=this.#s?.map((e=>`\n    <p class="error-text">${e}</p>\n    `)).join(" ");return` \n    <div class="form-control" ${this.markElement("form-control")}>\n        <label for="${this.#o}">${this.#n} </label>\n        <div>\n            <input class="input-text ${e?"input-error":""}"  type="${this.#r}" id="${this.#o}" \n            name="${this.#a}" placeholder="${this.#i}" value="${this.#l}">\n            ${e??""}\n        </div>\n    </div>\n    `}}class r extends s{#d;constructor(e,t){super(e),this.#d=t,this.init()}markup(){const e=this.title;return` <button class="button primary" ${this.markElement("button")}  type="submit" title="${e}">${e}\n </button>`}get title(){return this.#d}}class a extends s{#h;#c=[];#u;#m=new EventTarget;constructor(e,t,s){super(e),this.#h=t,this.#u=s,this.init()}afterRender(){const e=this.getSlot("button");new r(e,this.#h);const t=this.getSlot("inputs");this.#c?.forEach((e=>{e(t)}));const s=this.getSlot("link");this.#u?.(s),this.rootElement.addEventListener("submit",(e=>{e.preventDefault(),this.#m.dispatchEvent(new Event("submit_event"))}))}addInput(e){this.#c.push(e),this.render()}onSubmit(e){this.#m.addEventListener("submit_event",(t=>{const s=new FormData(this.rootElement);e(s)}))}markup(){return` <form ${this.markElement("form")}>\n            <div class="fields-wrapper">\n                 ${this.addSlot("inputs")} \n            </div>\n            <div class="buttons-wrapper">\n                 ${this.addSlot("button")}\n                 ${this.addSlot("link")}\n            </div>\n        </form>`}}class i{configs;constructor(e){this.configs=e}static Builder=class{configs=new Map;addFields(e,t){return this.configs.set(e,t),this}build(){return new i(this.configs)}}}function o(e){return new Promise((function(t,s){/^[a-zA-Z1-9+.-\\-_@]+$/.test(e)?t():s(new Error("only Latin, numbers and symbols +.-_@ are allowed in email"))}))}function l(e){return t=>new Promise((function(s,n){"string"==typeof t&&t.length>=e?s():n(new Error(`have to be more than ${e}`))}))}class d extends Error{errors;constructor(e){super(),this.errors=e}}class h{name;message;constructor(e,t){this.name=e,this.message=t}}class c{async validate(e,t){const s=[],n=e.configs.entries();for(let r=0;r<e.configs.size;r++){const e=n.next().value,r=e[0],a=e[1],i=t.get(r);for(let e=0;e<a.length;e++)try{await a[e](i)}catch(e){s.push(new h(r,e.message))}}if(s.length)throw new d(s)}}class u extends s{#d;#m=new EventTarget;constructor(e,t){super(e),this.#d=t,this.init()}afterRender(){this.rootElement.addEventListener("click",(e=>{e.preventDefault(),this.#m.dispatchEvent(new Event("link_event"))}))}onClick(e){this.#m.addEventListener("link_event",e)}markup(){return`  <a href="#" ${this.markElement("link")} title="${this.#d}">\n                   ${this.#d}\n                </a>`}}class m extends s{#g={};#m=new EventTarget;constructor(e){super(e),this.init()}afterRender(){const e=new a(this.rootElement,"Sign in",(e=>{new u(e,"Don't have an account yet?").onClick((()=>{this.#m.dispatchEvent(new Event("navigate-event"))}))}));e.addInput((e=>{this.#g.email=new n(e,{labelText:"Email",placeholder:"Email",name:"email"})})),e.addInput((e=>{this.#g.password=new n(e,{labelText:"Password",placeholder:"Password",name:"password"})})),e.onSubmit((e=>{this.validateForm(e)}))}onNavigateToRegistration(e){this.#m.addEventListener("navigate-event",(t=>{e()}))}validateForm(e){this.saveValue(),this.#p();const t=(new i.Builder).addFields("email",[o,l(5)]).addFields("password",[l(6)]).build();(new c).validate(t,e).catch((e=>{e.errors.forEach((e=>{const t=this.#g[e.name],s=e.message;this.#v(t,s)}))}))}onSubmit(e){this.#m.addEventListener("link-event",(t=>{e()}))}markup(){return"<slot></slot>"}#v(e,t){e.errorMessages=t}saveValue(){const e=new FormData(this.rootElement.firstElementChild);Object.entries(this.#g).forEach((([t,s])=>{s.value=e.get(t)}))}#p(){Object.entries(this.#g).forEach((([e,t])=>{t.deleteErrorsMessages()}))}}class g extends s{#w;constructor(e){super(e),this.init()}afterRender(){new m(this.getSlot("form")).onNavigateToRegistration((()=>{this?.#w()}))}onNavigateToRegistration(e){this.#w=e}markup(){return`\n    <div class="wrapper">\n        <header class="page-header">\n             <a href="#">\n                <img src="images/logo.png" class="logo" alt="TeamDev" height="37" width="200">\n              </a>\n        </header>\n    \n    <main class="box">\n        <h1>Sign in to FileHub</h1>\n        <hr class="hr">\n          ${this.addSlot("form")}\n    </main>\n</div>\n    `}}class p extends s{#g={};#m=new EventTarget;constructor(e){super(e),this.init()}afterRender(){const e=new a(this.rootElement,"Sign up",(e=>{new u(e,"Already have an account?").onClick((()=>{this.#m.dispatchEvent(new Event("navigate-event"))}))}));e.addInput((e=>{this.#g.email=new n(e,{labelText:"Email",placeholder:"Email",name:"email"})})),e.addInput((e=>{this.#g.password=new n(e,{labelText:"Password",placeholder:"Password",name:"password"})})),e.addInput((e=>{this.#g["confirm-password"]=new n(e,{labelText:"Confirm password",placeholder:"Confirm-password",name:"confirm-password"})})),e.onSubmit((e=>{this.validateForm(e)}))}onNavigateToLogin(e){this.#m.addEventListener("navigate-event",(t=>{e()}))}validateForm(e){this.saveValue(),this.#p();const t=(new i.Builder).addFields("email",[o,l(5)]).addFields("password",[l(6)]).addFields("confirm-password",[(s=e.get("password"),e=>new Promise((function(t,n){s===e?t():n(new Error("Passwords aren't equals"))})))]).build();var s;(new c).validate(t,e).catch((e=>{e.errors.forEach((e=>{const t=this.#g[e.name],s=e.message;this.#v(t,s)}))}))}onSubmit(e){this.#m.addEventListener("link-event",(t=>{e()}))}markup(){return"<slot></slot>"}#p(){Object.entries(this.#g).forEach((([e,t])=>{t.deleteErrorsMessages()}))}#v(e,t){e.errorMessages=t}saveValue(){const e=new FormData(this.rootElement.firstElementChild);Object.entries(this.#g).forEach((([t,s])=>{s.value=e.get(t)}))}}class v extends s{#w;constructor(e){super(e),this.init()}afterRender(){new p(this.getSlot("form")).onNavigateToLogin((()=>{this?.#w()}))}onNavigateToLogin(e){this.#w=e}markup(){return`\n<div class="wrapper">\n    <header class="page-header">\n        <a href="https://jobs.dou.ua/companies/teamdev/">\n            <img src="images/logo.png" class="logo" alt="TeamDev" height="37" width="200">\n        </a>\n    </header>\n\n    <main class="box">\n        <h1>Sign up to FileHub</h1>\n        <hr class="hr">\n       ${this.addSlot("form")}\n    </main>\n</div>\n    `}}class w extends s{constructor(e){super(e),this.init()}markup(){return'\n    <div id="notfound">\n    <div class="notfound">\n        <div class="notfound-bg">\n            <div></div>\n            <div></div>\n            <div></div>\n        </div>\n        <h1>oops!</h1>\n        <h2>Error 404 : Page Not Found</h2>\n        <a href="#">go back</a>\n        <div class="notfound-social">\n            <a href="https://www.facebook.com/TeamDev"><i class="fa fa-facebook"></i></a>\n            <a href="https://www.linkedin.com/company/teamdev-ltd-/"><i class="fa fa-linkedin-square"></i></a>\n            <a href="https://www.instagram.com/teamdev_ltd/"><i class="fa fa-instagram"></i></a>\n        </div>\n    </div>\n</div>\n\n    '}}class E{#E={};#f={};#b={};set defaultPage(e){this.#f=e}set errorPage(e){this.#b=e}addPage(e,t){this.#E[e]=t}getPage(e){return this.#E[e]?this.#E[e]:""===e?this.#f:this.#b}}new class extends s{#T;constructor(e){super(e);const t=new E;t.defaultPage=e=>{new g(e).onNavigateToRegistration((()=>{window.location.hash="#registration"}))},t.errorPage=e=>{new w(e)},t.addPage("#login",(e=>{new g(e).onNavigateToRegistration((()=>{window.location.hash="#registration"}))})),t.addPage("#registration",(e=>{new v(e).onNavigateToLogin((()=>{window.location.hash="#login"}))})),this.#T=t,this.init()}afterRender(){this.#x(),window.addEventListener("hashchange",(()=>{this.#x()}))}#x(){const e=window.location.hash;this.rootElement.innerHTML="",this.#T.getPage(e)(this.rootElement)}markup(){return"<slot></slot>"}}(document.body);
